.\" This manpage source uses rsml coding. 
.so /usr/share/lib/tmac/sml
.so /usr/share/lib/tmac/rsml
.\"
.\"
.\" *********************************************************************
.\" *                                                                   *
.\" *      Copyright (c) Digital Equipment Corporation, 1991, 1994      *
.\" *                                                                   *
.\" *                       All Rights Reserved.                        *
.\" *                                                                   *
.\" *********************************************************************
.\"
.\"
.\" HISTORY
.\"
.\" @(#)$RCSfile: snmpsetup.8,v $ $Revision: 3.2.4.10 $ (DEC) $Date: 1993/12/21 13:46:57 $
.\"
.TH snmpsetup 8
.SH NAME
.PP
\*Lsnmpsetup\*O \- Perform initial set up of the POLYCENTER Common Agent Simple Network Management Protocol (SNMP) Agent
.SH SYNOPSIS
.PP
.sS
\*L/usr/sbin/snmpsetup\*O
.sE
.SH DESCRIPTION
.PP
.iX "snmpsetup command"
.iX "SNMP" "setup script"
.iX "SNMP" "introductory information"
.iX "-;SNMP" "Simple Network Management Protocol"
The \*Lsnmpsetup\*O
.iX "Simple Network Management Protocol"  "setting up automatically"
.iX "-; Simple Network Management Protocol"  "SNMP"
.iX "-; Simple Network Management Protocol"  "snmpsetup command"
command is an interactive script that can be used to perform initial
configuration of the POLYCENTER Common Agent.
.PP
Before you invoke the \*Lsnmpsetup\*O command,
you must know the Internet Protocol (IP) address of each Network Management
Station (NMS) that you want to have monitor or manage your system.
.PP
You can run the \*Lsnmpsetup\*O command
while in multiuser mode, but you must be root or superuser.  Changes made
to the configuration files only take effect after the Common Agent has
been stopped and restarted.
.PP
The \*Lsnmpsetup\*O script prompts you for each item, usually
providing a default value which is selected if you press carriage return
without entering a value.  Enter each value in the format
specified.  Spaces between words are permitted only when entering the name of
the system administrator and the system location.
Enter all IP addresses in dot notation (for example, 1.2.3.4).
The configuration files affected by the \*Lsnmpsetup\*O script are as follows:
.PP
\*L/etc/eca/snmp_pe.conf\*O
.PP
\*L/etc/eca/internet_mom.conf\*O
.PP
The contents of the configuration files are overwritten upon
successful completion of the \*Lsnmpsetup\*O script without regard to their
original contents.  The original files are renamed to
<\*Vfilename\*O>.\*Lsav\*O.  The \*Lsnmpsetup\*O script is
recommended only for the initial setup of the configuration files.  Use a text
editor to add to or modify the configuration files if you want to preserve
existing entries.
.\"
.SS The SNMP Configuration File
The \*Lsnmp_pe.conf\*O  file contains information used by the SNMP protocol
engine component of the POLYCENTER Common Agent.  It defines which communities
are permitted to access the agent system, and which communities should receive
SNMP traps that are generated by the agent.  In addition, to disable the
sending of
\*LauthenticationFailure\*O traps you can specify
the '\*Lno_auth_trap\*O'
directive in the \*Lsnmp_pe.conf\*O file.
.PP
The directives specified in this file are not order-dependent.
The following is a sample of the initial version of this file.
.oS
#
# snmp_pe.conf
# SNMP Network Management Agent Configuration File
# for POLYCENTER Common Agent
#
community       PUBLIC   0.0.0.0      readonly
.oE
.PP
The following list describes each file directive and its significance:
.VL 4m
.LI "\*Lcommunity \*Vname IP-address community-type\*O"
The \*Lcommunity\*O
directive describes an SNMP community for the agent.
.VL 4m
.LI "\*Vname\*O"
A string that describes
the name of the community.
.LI "\*VIP-address\*O"
The dot-notation Internet Protocol
(IP) address for a Network Management Station (NMS).
If you specify 0.0.0.0 in the \*VIP-address\*O
field, the \*Lsnmp_pe\*O process honors requests from any Network
Management Station having the \*Vname\*O community.
.LI "\*Vcommunity-type\*O"
The \*Vcommunity-type\*O parameter can be one of the following:
.VL 4m
.LI "\*Lreadonly\*O"
Permits monitoring of variables.
.LI "\*Lreadwrite\*O"
Permits both monitoring and setting of variables.
.LI "\*Lwriteonly\*O"
Permits setting of variables.
.LI "\*Lnone\*O"
Does not permit access to any variables.
.LE
.LE
.LI "\*Ltrap \*Vname IP-address\*O"
The \*Ltrap\*O directive describes an SNMP community to which traps are sent.
.VL 4m
.LI "\*Vname\*O"
A string that describes the name of the trap community.
.LI "\*VIP-address\*O"
The dot-notation Internet Protocol (IP)
address of the Network Management System to receive traps generated by
the Common Agent.
.LE
.LI "\*Lno_auth_traps\*O"
The \*Lno_auth_traps\*O directive specifies that no
.nL
\*LauthenticationFailure\*O traps are to be
sent to any of the trap communities.
.IP
If this directive is not specified, the \*Lsnmp_pe\*O process will issue
\*LauthenticationFailure\*O traps to all trap communities.
.LE
.\"
.SS Internet MOM Configuration File
The \*Linternet_mom.conf\*O configuration file contains
the values for the variables 'sysLocation'
and 'sysContact' MIB-II System Group.
The initial values for sysLocation and sysContact are
"Unknown".  The file also contains the default value for the Link Polling
Interval used by the Common Agent to check the operational status of
each TCP/IP network interface for generating the \*LlinkUp\*O and
\*LlinkDown\*O traps (see Common Agent
Trap Support).  The initial value of the polling interval is 60 seconds.
.PP
The values in this file are order-dependent and are required.
The initial version of this file is as follows:
.oS
#
# This is the configuration file for the TCP/IP MOM.
# A "#" in the first line indicates a comment.
# A line should not be greater than 1023 characters.
# The first line should contain information about the
# location of the system.
# The second line should contain information about the
# contact person for the system.
# The third line should contain the default Link Polling
# Interval value used internally by the Internet MOM (in seconds).
#
Unknown
Unknown
60
.oE
.\"
.SS Common Agent Components
The basic run-time components of the Common Agent consist of
the \*Lmold\*O process, the \*Linternet_mom\*O process, the
\*Lfddi_mom\*O process, the \*Ltrn_mom\*O
process, and the \*Lsnmp_pe\*O process.
.PP
The \*Lmold\*O process provides the registration facility that relates managed
object classes to the Managed Object Module (MOMs) that support the classes,
and also acts as a MOM lookup service for the Common Agent components.
The \*Lfddi_mom\*O process is the MOM component of the POLYCENTER Common
Agent that provides access to the FDDI MIB managed objects as defined by
\*VFDDI Management Information Base\*O (RFC 1285). The \*Ltrn_mom\*O process
is the MOM component of the POLYCENTER Common Agent that provides access to the
managed objects as defined by \*VIEEE Token 802.5 Ring MIB\*O (RFC 1231).
The \*Linternet_mom\*O process is the MOM
component of the POLYCENTER Common Agent that provides access to the
Internet MIB-II objects specified by \*VManagement Information Base for
Network Management of TCP/IP-based Internets: MIB II\*O (RFC 1213).
.PP
The \*Lsnmp_pe\*O process is the SNMP protocol engine component that
handles incoming SNMP management requests (on SNMP port 161) and sends SNMP
management responses.  When the \*Lsnmp_pe\*O daemon process receives an
SNMP message from a Network Management System (NMS),
the \*Lsnmp_pe\*O process performs
SNMP operations on the message and returns a valid response to the NMS.
.PP
.SS Common Agent Extensibility
The POLYCENTER Common Agent is extensible; using the optional Developer's
Toolkit layered product, you can add Managed Object Modules for managing
objects other than the objects managed by the
\*Linternet_mom\*O process, the \*Lfddi_mom\*O process, and the
\*Ltrn_mom\*O process.
.PP
The Developer's Toolkit consists primarily of the \*Lmomgen\*O
utility, template source files, and example MOMs.
The \*Lmomgen\*O utility produces ANSI C source code modules that can be
customized for your particular application.
See the \*VPOLYCENTER Managed Object Module Developer's Guide\*O and the
\*Lmomgen\*O(8) reference page (both supplied with the Common Agent
Developer's Toolkit) for information on how to generate your own MOM.
.PP
The Common Agent may be reconfigured to support additional
MOMs and their defined MIBs by performing these steps as superuser:
.AL
.LI
Stop the Common Agent by executing the following command:
.iS
# /sbin/init.d/common_agent stop
.iE
.LI
Copy the MOM executable to \*L/usr/sbin/\*O
and set the protection mode to 755.
.LI
Modify the \*L/sbin/init.d/common_agent\*O startup and shutdown script by
updating the variable \*LUSER_MOMS\*O to include the MOM executable path name.
.LI
Update the Management Information Repository (MIR) with the new MIB. For
example:
.iS
# cp /usr/var/opt/ECO110/mir.dat /usr/var/opt/ECO110/mir.dat1
# mirc -b/usr/var/opt/ECO110/mir.dat1 \e
-o/usr/var/opt/ECO110/mir.dat <new-mib>
# chmod 644 /usr/var/opt/ECO110/mir.dat
.iE
.LI
Restart the common agent, as follows:
.iS
# /sbin/init.d/common_agent start
.iE
.LI
Load the MIB in the databases of the various Network Management Stations
that will be used to manage the object.
\"
.LE
.SS Common Agent Trap Support
The following types of traps are supported by the Common Agent:
.ML
.LI
\*LcoldStart\*O
.LI
\*LwarmStart\*O
.LI
\*LauthenticationFailure\*O
.LI
\*LlinkUp\*O
.LI
\*LlinkDown\*O
.LI
\*LenterpriseSpecific\*O
.LE
.PP
The \*Lsnmp_pe\*O process sends traps to all
communities identified with the \*Ltrap\*O directive in the
\*Lsnmp_pe.conf\*O configuration file (see the FILES section).
Enterprise-specific traps
are posted to the \*Lsnmp_pe\*O process by the \*Lmomgen\*O-generated MOMs,
and the \*LlinkUp\*O and
.nL
\*LlinkDown\*O generic traps are posted to the
\*Lsnmp_pe\*O process by the \*Linternet_mom\*O process.  The \*Lsnmp_pe\*O
process distributes the traps to all trap listeners.
.PP
A \*LcoldStart\*O trap is generated when the \*Lsnmp_pe\*O
process is originally started after the initial installation of the
operating system, once for each subsequent reboot of the system,
and possibly once for each subsequent upgrade of the operating system.
.PP
A \*LwarmStart\*O trap is generated whenever the
\*Lsnmp_pe\*O process is restarted, except for the reasons stated above
for \*LcoldStart\*O conditions.
.PP
An \*LauthenticationFailure\*O trap is generated by the \*Lsnmp_pe\*O
process when an attempt to use a community fails.  An attempt will fail
when an unauthorized client tries to use \*Lsnmp_pe\*O, or if the requested
community is used in a way that the community type does not allow.
.PP
The default is for the \*Lsnmp_pe\*O process to generate
.nL
\*LauthenticationFailure\*O traps as long as one or more
trap communities are specified using the \*Ltrap\*O directive in
the \*Lsnmp_pe.conf\*O configuration file.
However, if the following directive is specified in the
\*Lsnmp_pe.conf\*O file, \*LauthenticationFailure\*O traps are not generated:
.oS
no_auth_traps
.oE
A \*LlinkUp\*O or \*LlinkDown\*O trap is generated by the
\*Linternet_mom\*O process for each TCP/IP interface
on the resident system whenever the \*Linternet_mom\*O process
is restarted, and whenever the link-up or link-down condition is detected
by the \*Linternet_mom\*O process.  You can configure the Link Trap Polling
Interval (see the Internet MOM Configuration File section).
.\"
.SS Common Agent Process Startup Order
A script to automatically stop or start the Common Agent processes is provided
with the Common Agent.  The syntax of the script is as follows:
.sS
.sp
\*L/sbin/init.d/common_agent\*O {\*Lstart\*O|\*Lstop\*O}
.sp
.sE
It is recommended that you use the \*Lcommon_agent\*O script
to start and stop the Common Agent processes whenever necessary.
New entries should be added to stop and start new
MOMs, or existing entries should be removed for MOMs that are no longer
used.  When starting the Common Agent processes, you must always start
the \*Lmold\*O process first.
.PP
Some of the variables in the IP routing table and the EGP group are
obtained from the \*Lgated\*O daemon, if it is running on the system.  If the
\*Lgated\*O daemon is not running prior to starting the Common Agent processes,
the default values are used for these variables.
.\"
.SH RESTRICTIONS
.PP
The \*LegpNeighborLoss\*O trap is not supported.
.\"
.SH EXAMPLES
.PP
The following is an example of an \*Lsnmp_pe.conf\*O file:
.oS
#
# snmp_pe.conf
# SNMP Network Management Agent Configuration File
# POLYCENTER Common Agent
#

#
#  Describe who can use your SNMP process by
#  defining "communities".    USAGE:
#
#  community <name> <IP address> <community-type>
#
#  This is limited-use community; a finite number of
#  hosts can use it.  This community can only be queried.
#
community org1	129.40.11.200   readonly
community org1	129.40.11.201   readonly

#
#  This is a wide-open, general-use community.  Specifying
#  0.0.0.0 means that any address can use this community only
#  to monitor variables.
#
community public 0.0.0.0 readonly

#
#  This is the management community.  Variables can be set
#  as well as monitored.  It is a wide-open community as well.
#
community manage 0.0.0.0 readwrite

#
#  These are trap community definitions.  Traps are sent to these
#  addresses all from the same community name.
#
trap   trap1   129.40.11.200
trap   trap1   129.40.11.201
.oE
In this example, note the following:
.ML
.LI
The \*Lorg1\*O Community
can be monitored by either 129.40.11.200 or 129.40.11.201.
.LI
The \*Lpublic\*O Community
can be monitored by any Network Management Station.
.LI
The \*Lmanage\*O Community
can be monitored and managed by any Network Management Station.
.LI
When a trap is generated, it is sent to the \*Ltrap1\*O community
at 129.40.11.200 and 129.40.11.201.
.LI
In this example the \*Vno_auth_traps\*O directive was not specified,
meaning that all trap communities receive
.nL
\*LauthenticationFailure\*O traps.
.LE
.SH FILES
.PP
.VL 4m
.LI "\*L/etc/eca/snmp_pe.conf\*O"
The POLYCENTER Common Agent SNMP protocol engine configuration file.
.LI "\*L/etc/eca/internet_mom.conf\*O"
The POLYCENTER Common Agent Internet MOM configuration file.
.LI "\*L/sbin/init.d/common_agent\*O"
The POLYCENTER Common Agent startup and shutdown script.
.LE
.\"
.SH RELATED INFORMATION
.PP
.\"momgen(8) provided with the Common Agent Developer's Toolkit.
Commands: \*Lmirc\*O(8), \*Lmomgen\*O(8), \*Lmtu\*O(8)
.PP
Daemons: \*Lfddi_mom\*O(8), \*Lgated\*O(8), \*Linternet_mom\*O(8),
\*Lmold\*O(8), \*Lsnmp_pe\*O(8), \*Ltrn_mom\*O(8)
.PP
\*VManagement Information Base for Network Management of TCP/IP-based Internets: MIB II\*O (RFC 1213)
.PP
\*VA Simple Network Management Protocol\*O (RFC 1157)
.PP
\*VPOLYCENTER Common Agent Managed Object Module Developer's Guide\*O
.PP
\*VPOLYCENTER Common Agent Managed Object Module Developer's Reference\*O
.EQ
delim off
.EN
