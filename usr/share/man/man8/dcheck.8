.\" This manpage source uses rsml coding. 
.so /usr/share/lib/tmac/sml
.so /usr/share/lib/tmac/rsml
.\"
.\"
.\" *********************************************************************
.\" *                                                                   *
.\" *      Copyright (c) Digital Equipment Corporation, 1991, 1994      *
.\" *                                                                   *
.\" *                       All Rights Reserved.                        *
.\" *                                                                   *
.\" *********************************************************************
.\"
.\"
.\" HISTORY
.\"
.\" @(#)$RCSfile: dcheck.8,v $ $Revision: 1.1.2.2 $ (DEC) $Date: 1992/09/21 10:25:32 $
.\"
.\"
.TH dcheck 8
.SH NAME
.PP
\*Ldcheck\*O \- Checks directory consistency 
.SH SYNOPSIS
.PP
.sS
\*L/usr/sbin/dcheck\*O [\*L\-i \*Vinumbers\*O] [\*Vfilesystem\*O]
.sE
.SH DESCRIPTION
.PP
.iX "dcheck program"
.iX "file system" "checking directory consistency"
The \*Lfsck\*O command supersedes the \*Ldcheck\*O
command for normal consistency checking.
.PP
The \*Ldcheck\*O command reads the directories in a file system
and compares 
the link-count in each inode with the number of directory
entries by which it is referenced.
If a file system is not specified, a set of default file systems
is checked.
.PP
To get optimum performance, specify the raw version of the special 
file because the ilist is read in large chunks.
.SH FLAGS
.PP
The \*L\-i\*O flag is specified with a list of inumbers.
If a specified inumber is found in a directory, the \*Ldcheck\*O command 
displays the inumber, the inumber of the directory,
and the name of the entry.
.SH RESTRICTIONS
.PP
Because the \*Ldcheck\*O command uses two passes to check directories, 
it may produce erroneous diagnostics if active file systems are checked.
.SH ERRORS
.PP
If a file is found and the link-count and the number
of directory entries do not agree, \*Ldcheck\*O reports relevant 
information.
Allocated files that have 0 link-count and no entries are also listed.
A potentially dangerous situation
occurs if there are more entries than links.
If entries are removed and the link-count drops to zero (0),
the remaining entries point to nothing should be removed.
If there are more links than entries or if there is
an allocated file with neither links nor entries,
some disk space may be lost.
.SH RELATED INFORMATION
.PP
fs(5), clri(8), fsck(8), icheck(8), ncheck(8)
.EQ
delim off
.EN
