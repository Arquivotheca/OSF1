.\" This manpage source uses rsml coding. 
.so /usr/share/lib/tmac/sml
.so /usr/share/lib/tmac/rsml
.\"
.\"
.\" *********************************************************************
.\" *                                                                   *
.\" *      Copyright (c) Digital Equipment Corporation, 1991, 1994      *
.\" *                                                                   *
.\" *                       All Rights Reserved.                        *
.\" *                                                                   *
.\" *********************************************************************
.\"
.\"
.\" HISTORY
.\"
.\" @(#)$RCSfile: sa.8,v $ $Revision: 3.2.2.3 $ (DEC) $Date: 1992/10/20 18:00:49 $
.\"
.\" 
.\" (c) Copyright 1991, OPEN SOFTWARE FOUNDATION, INC.
.\" ALL RIGHTS RESERVED
.\" 
.\" sa8.man
.\" nm_03.08.90
.\" hah_19.07.90
.TH sa 8
.SH NAME
\*Lsa \*O \- Summarizes accounting records
.SH SYNOPSIS 
.sS
\*Lsa\*O [\*L-abcdDfijkKlmnorstu\*O] [\*L-v\*V Number\*O] [\*L-S \*VSaveFile\*O] [\*L-U\*O \*VUserFile\*O] [\*VFile\*O]
.sE
The \*Lsa\*O command helps you manage the large volume of accounting
information that is generated each day when system accounting has been
enabled by the system administrator or by the superuser.
.SH "FLAGS"
.VL
.LI "\*L-a\*O"
Outputs all command names (including those containing unprintable
characters and commands used only once) in the last column. In the
default format, such commands are summed and the total is written as
the entry \*L***other\*O.
.LI "\*L-b\*O"
Sorts \*Lcpu\*O output column \*L3\*O according to the sum of user and
system CPU time divided by the amount of CPU time required to execute
the command entered in the last column (\*L6\*O) as many times as is
entered in the first column (\*L1\*O).
.LI "\*L-c\*O"
Adds three percentage columns to the default format to list percentages as
follows:
.AL
.LI 
Lists the percentage of the number of times each command was executed with
respect to the total number of times all commands were executed
(see \*L1a\*O below).
.LI
Lists the percentage of the amount of real time required to execute
each command the number of times entered in the first column with
respect to the total real time required to execute the total of all
commands entered in the last column (see \*L2a\*O below).
.LI
Lists the percentage of the amount of command CPU time required to execute
each command the number of times entered in the first column with respect to
the total CPU time required to execute the total of all commands entered in
the last column (see \*L3a\*O below).
.LE
.LI "\*L-d\*O"
Sorts \*Lavio\*O output column (\*L4\*O) in descending order
according to the average number of disk I/O operations.
.LI "\*L-D\*O"
Substitutes \*Ltio\*O column (\*L4a\*O) for the \*Lavio\*O (\*L4\*O) column
and sorts \*Ltio\*O output column \*L4a\*O in descending order according to
the total number of disk I/O operations.
.LI "\*L-f\*O"
Used with the \*L-v\*O flag to inhibit interactive threshold comparison of
commands.
.LI "\*L-i\*O"
Reads raw database file \*L/var/adm/pacct\*O only. Does not include
records from summary database file \*L/var/adm/savacct\*O.
.LI "\*L-j\*O"
Outputs the average number of seconds per command in default columns \*L2\*O,
\*L3\*O, and \*L4\*O instead of the total time in minutes for the number of
calls entered in column \*L1\*O for each command.
.LI "\*L-k\*O"
Sorts and outputs records according to the value in the \*Lk\*O output
column \*L5\*O in descending order.
.LI "\*L-K\*O"
Substitutes \*Lk*sec\*O column (\*L5a\*O) for the \*Lk\*O (\*L5\*O)
column and sorts the \*Lk*sec\*O output column in descending order according
to the value of the memory time integral.
.LI "\*L-l\*O"
Separates \*Lcpu\*O column \*L3\*O into two columns. The new column entries
are column \*L3a\*O, which lists the \*Ls\*O (system) part of the CPU
minutes, and column \*L3b\*O, which lists the \*Lu\*O (user) part of the
CPU minutes.
.LI "\*L-m\*O"
Outputs a 5-column file, which provides the information in the
following table.  Listed below in left-to-right order are 
the column identification suffixes, or \*Lnone\*O when no suffix is used,
and the purpose of the column.  Some columns are identical to the 
default output format described in the table in the \*LDESCRIPTION\*O section;
these are marked with \*L*\*O.
.VL
.LI "\*Lnone\*O"
Username or user ID as written in the \*L/etc/passwd\*O file.
.LI "\*Lnone\*O"
The total number of processes executed by the user during the accounting period.
.LI "\*Lcpu *\*O"
Same as column \*L3\*O in the default output file.
.LI "\*Ltio *\*O"
Same as column \*L4a\*O in the default output file.
.LI "\*Lk*sec *\*O"
Same as column \*L5a\*O in the default output file.
.LE
.LI "\*L-n\*O"
Outputs the default format sorted in descending order according to the number
of times each command was called.
.LI "\*L-o\*O"
Substitutes, in the default output format, the ratio of user CPU time
(\*Lu\*O) to system CPU time (\*Ls\*O) as \*Lu/s\*O in column \*L3\*O
in place of the total user and system CPU time (\*Lcpu\*O) for the
number of calls entered in the first column.
.LI "\*L-r\*O"
The default format, described under Description, is resorted in
ascending order according to the values entered in column \*L3\*O,
\*Lcpu\*O time. This sort is the reverse of the default sort.
.LI "\*L-s\*O"
Merges information in accounting database file \*L/var/adm/pacct\*O
with summary files you specify with the \*L-U\*O and \*L-S\*O flags,
or merges the database file information with information in default
files \*L/var/adm/usracct\*O or \*L/var/adm/savacct\*O. After the
merge, database file \*L/var/adm/pacct\*O is truncated. The use of this
flag also implies the use of the \*L-a\*O flag.
.LI "\*L-S \*O\*VSaveFile\*O"
Uses \*VSaveFile\*O as the command summary file in place of file
\*L/var/adm/savacct\*O.
.LI "\*L-t\*O"
Adds the \*Lre/cp\*O column (\*L3d\*O) to the default format. Entries in this
column express the ratio of real time to total (\*Lcpu\*O) time, which is
the sum of user and system time for each command entered in the last column.
.LI "\*L-u\*O"
Suspends all other flags and prints the user numeric
ID, the CPU time, memory usage, number of I/O operations, and the
command name for each command.
.LI "\*L-U \*O\*VUserFile\*O"
Uses \*VUserFile\*O as the user summary file in place of file
\*L/var/adm/usracct\*O to record per-user statistics output with the
\*L-m\*O flag.
.LI "\*L-v \*O\*VNumber\*O"
Prints, as a query, the name of each command used \*VNumber\*O times or
fewer to the standard output as follows:
.oS
\*Vcommand\*C--
.iE
where \*Vcommand\*C--\*O is the name of the command written to the
standard output by \*Lsa\*O.
.PP
When you respond by typing \*Ly\*O to the standard input, the command
record is omitted from a default-formatted list at the end of the
interactive command queries written to the standard output. The
columnar values of the omitted record are totaled in an added record
whose command name is \*L**junk**\*O in the last column of that
list. When you type any other character, the record for the queried
command name remains in the default output list at the end of the
interactive commands written to the standard input.
.LE 
.SH "DESCRIPTION"
When you use the \*L-s\*O flag with the \*Lsa\*O command, the
information in \*L/var/adm/pacct\*O is condensed into summary file
\*L/var/adm/savacct\*O, which contains a count of the number of times
each command was called and the amount of time system resources were used.
.PP 
Condensed information for each user is stored in
\*L/var/adm/usracct\*O.  This condensed-information file conserves
storage space because on a large system the \*L/var/adm/pacct\*O daily
process file can grow by as many as 100 blocks per day.  Summary files
are normally read before accounting files are, so that files produced
by \*Lsa\*O include all available information.
.PP 
When a filename is given as the last argument, the named file is treated
as the process accounting file. The \*L/var/adm/pacct\*O file is the
default process accounting file.
.PP 
When the \*Lsa\*O command is invoked with no flags, the default output
summary is an unheaded 6-column file consisting of, in some cases,
information having an identification suffix in the column. The
identification suffix may be changed from the default (no flags
specified) output format by using various flags.
.PP 
The following table lists the columns with left-to-right reference column 
numbers (not included in output) for the default format on the left, the
identification suffix for the entry when one is used (or \*Lnone\*O
when one is not in the middle), and the purpose of the information in
that column on the right.
.PP
Columns having more than one identification suffix description
(\*L2\*O and \*L2a\*O, for example) use the alternate suffix
designation in the same \*Lsa\*O output printout column for each of
the listed alternate entries for the column.  For example, the second
column has two possible suffix designations: \*Lre\*O and \*L%\*O. The
\*Lre\*O reference in the middle column describes the information in
the second column of the output printed by the \*Lsa\*O command when
this suffix is used. Correspondingly, the \*L%\*O reference describes
the information in the \*Lsa\*O output when the \*L%\*O suffix is
used.
.PP 
.TS 
tab(@) ;
lb lb l.
1@none@T{
The number of times the command entered in the last column (\*L6\*O) was
called.
T}
1a@%@T{
When the \*L-c\*O flag is used, \*Lsa\*O adds this column after column
\*L1\*O to list the number of times the command was called (entered in
column \*L1\*O) as a percentage of the total number of times all
commands entered in the last column were called.
T}
2@re@T{
The number of real-time (elapsed) minutes required to execute the
command entered in the last column (\*L6\*O) as many times as is entered
in the first column (\*L1\*O).
T}
2a@%@T{
When the \*L-c\*O flag is used, \*Lsa\*O also adds this column after
column \*L2\*O to list the amount of real time (entered in column \*L2\*O)
required to process the command entered in the last column (\*L6\*O) as
many time as is entered in the first column (\*L1\*O), as a percentage of the
total amount of real time required to process all of the commands listed in
the last column.
T}
3@cpu@T{
The number of CPU (user plus system) minutes used to execute the
command entered in the last column (\*L6\*O) as many times as is entered in
the first column (\*L1\*O).
T}
\*L3a@u\*O@The number of user CPU minutes used.
\*L3b@s\*O@The number of system CPU minutes used.
3c@u/s@T{
When the \*L-o\*O flag is used, substitutes \*Lu/s\*O column
(\*L3c\*O) for the \*Lcpu\*O (\*L3\*O) column and sorts the \*Lu/s\*O
output column in descending order according to the ratio of user CPU
time to system CPU time.
T}
3d@%@T{
When the \*L-c\*O flag is used, \*Lsa\*O also adds this column after
column \*L3\*O to list the amount of CPU time (entered in column 3) required
to process the command, entered in the last column, the number of
times, entered in the first column, as a percentage of the total CPU
time required to process all of the commands listed in the last
column.
T}
3e@re/cpu@T{
When the \*L-t\*O flag is used, adds the \*Lre/cpu\*O column to the
default output format. Entries in this column express the ratio of
real CPU process time to total CPU time (\*Lcpu\*O), which includes
user and system time.  These entries appear after entries for the
\*Lcpu\*O (\*L3\*O) column. The default output sort remains unchanged.
T}
4@avio@T{
The average number of input/output operations for each listed command.
T}
4a@tio@T{
The total number of input/output operations for each listed command.
T}
5@k@T{
The average number of kiloblocks (blocks x 1024) of memory used for each
command process.
T}
\*L5a@k*sec\*O@CPU storage-time integral in K-core seconds (seconds x 1024).
6@none@T{
The command name (a trailing \*L*\*O [asterisk] indicates a forked program).
T}
.TE
.PP 
Other considerations for entries in the printed \*Lsa\*O output are as follows:
.ML
.LI
All times are expressed to nearest one hundreth. The default format is
sorted in descending order according to the values entered in column
\*L3\*O, \*Lcpu\*O time.
.LI
You should not share accounting files among nodes in a distributed
environment.  Each node should have its own copy of the various accounting
files.
.LI
When you are also using \*L/usr/sbin/acct/*\*O accounting commands, do
not delete accounting records in the \*L/var/adm/pacct\*O process
accounting source file because these records also provide information
for summary data files when the \*L-s\*O option is used.
.LE 
.SH "EXAMPLES"
.AL
.LI
To summarize accounting records for all commands entered in the
\*L/var/adm/pacct\*O process database file, enter:
.iS
sa  -a
.iE
Commands  used only once are summed with the entry \*L***other\*O in the
last column of the default output format.
.LI
To summarize accounting records according to the average number of kiloblocks
of memory used for each command, enter:
.iS
sa -k
.iE
.LE 
.SH "FILES"
.VL
.LI "\*L/usr/sbin/sa\*O"
Specifies the command path
.LI "\*L/var/adm/pacct\*O"
Process accounting database file.
.LI "\*L/var/adm/savacct\*O"
System process accounting summary file.
.LI "\*L/var/adm/usracct\*O"
User process accounting summary file.
.LE 
.SH "RELATED INFORMATION"
.PP
Commands:   \*Lacct\*O(8), \*Lacctcms\*O(8), \*Lacctcom\*O(8), 
\*Lacctcon\*O(8), \*Lacctmerg\*O(8), \*Lacctprc\*O(8), \*Lfwtmp\*O(8), 
\*Lrunacct\*O(8)
.EQ
delim off
.EN
