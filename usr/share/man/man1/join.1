.\" This manpage source uses rsml coding. 
.so /usr/share/lib/tmac/sml
.so /usr/share/lib/tmac/rsml
.\"
.\"
.\" *********************************************************************
.\" *                                                                   *
.\" *      Copyright (c) Digital Equipment Corporation, 1991, 1994      *
.\" *                                                                   *
.\" *                       All Rights Reserved.                        *
.\" *                                                                   *
.\" *********************************************************************
.\"
.\"
.\" HISTORY
.\"
.\" @(#)$RCSfile: join.1,v $ $Revision: 3.2.5.4 $ (DEC) $Date: 1993/11/03 13:49:19 $
.\"
.\" 
.\" (c) Copyright 1991, OPEN SOFTWARE FOUNDATION, INC.
.\" ALL RIGHTS RESERVED
.\" 
.TH join 1
.SH NAME
\*Ljoin\*O \- Joins the lines of two files
.SH SYNOPSIS
.PP
.sS
.SS Current syntax
.IP
.in +.5i
.ti -.5i
\*Ljoin\*O
\*O[\*L\(hya\ \*Vfile_number\*O | \*V-v file_number\*O]
\*O[\*L\(hye\*O\ \*Vstring\*O]
\*O[\*L\(hyo\*O\ \*Vnumber\&.field\*L,\*O\ \&...]
\*O[\*L\(hyt\ \*Vcharacter\*O]
\*O[\*L-1\ \*Vfield\*O]
\*O[\*L-2\ \*Vfield\*O]
\*Vfile1\*O
\*Vfile2\*O
.in -.5i
.SS Obsolescent syntax
.IP
.in +.5i
.ti -.5i
\*Ljoin\*O
\*O[\*L\(hya\ \*Vnumber\*O]
\*O[\*L\(hye\*O\ \*Vstring\*O]
\*O[\*L\(hyj\*O\ \*Vnumber\*O\ |\ \*Vfield\*O\ |\ \*Vnumber\*O\ \*Vfield\*O]
\*O[\*L\(hyo\*O\ \*Vnumber\&.field\*L,\*O\ \&...]
\*O[\*L\(hyt\ \*Vcharacter\*O]
\*Vfile1\*O
\*Vfile2\*O
.in -.5i
.sE
.PP
The \*Ljoin\*O command reads \*Vfile1\*O and \*Vfile2\*O and
joins lines in the files that contain common fields, or otherwise
according to the flags, and writes the results to standard output.
.SH FLAGS
.PP
.\" .zA "review, R1.1.2, XPG4"
.VL 4m
.LI "\*L-1 \*Vfield\*O"
Joins on the \*Vfield\*Oth field of \*Vfile1\*O.  Fields are decimal
integers starting with 1.
.LI "\*L-2 \*Vfield\*O"
Joins on the \*Vfield\*Oth field of \*Vfile2\*O.  Fields are decimal
integers starting with 1.
.LI "\*L-a \*Vnumber\*O"
Produces an output line for each unpairable
line found in \*Vfile1\*O if \*Vnumber\*O is
\*L1\*O, or \*Vfile2\*O if \*Vnumber\*O is \*L2\*O.  Without \*L-a\*O,
\*Ljoin\*O produces output only for lines containing a common field.
If both \*L-a 1\*O and \*L-a 2\*O are used,
all unpairable lines will be output.
.LI "\*L-e \*Vstring\*O"
Replaces empty output fields with \*Vstring\*O.
.LI "\*L-j \*Vnumber\*O | \*Vfield\*O | \*Vnumber field\*O"
Joins the two files on \*Vfield\*O of file
\*Vnumber\*O, where \*Vnumber\*O is \*L1\*O for \*Vfile1\*O or \*L2\*O for
\*Vfile2\*O.  If you do not specify \*Vnumber\*O, \*Ljoin\*O uses
\*Vfield\*O in each file.  Without \*L-j\*O, \*Ljoin\*O uses the
first field in each file.  The default value for both \*Vnumber\*O
and \*Vfield\*O is 1.  (Obsolescent)
.IP
If you enter only a 1 or a 2 as an argument to
\*L-j\*O, \*Ljoin\*O interprets this argument as the
file number (\*Vnumber\*O); integers greater than 2 are interpreted
as the field number (\*Vfield\*O).  Therefore,
if you want to specify a field number of 2, you must
precede this specification with a \*Vnumber\*O argument; otherwise,
the \*Ljoin\*O program interprets the 2 as the file number (\*Vnumber\*O).
.LI "\*L-o\*O \*Vnumber\&.field\*L,\*O \&.\&.\&."
Produces output lines consisting of the fields specified in
one or more \*Vnumber\&.field\*O arguments, where \*Vnumber\*O
is \*L1\*O for \*Vfile1\*O or \*L2\*O for \*Vfile2\*O,
and \*Vfield\*O is a field number.  Multiple \*L-o\*O arguments should
be separated with commas.
.LI "\*L-t \*Vcharacter\*O"
Uses \*Vcharacter\*O (a single character)
as the field separator character in the input
and the output.  Every appearance of
\*Vcharacter\*O in a line is significant.  The default separator
is a space.  If you do not specify \*L-t\*O, \*Ljoin\*O also
recognizes the tab and newline characters as separators.
.IP
With default field separation, the collating sequence is that of
\*Lsort -b\*O.
If you specify \*L-t\*O, the sequence is that of a plain sort.
To specify a tab character, enclose it in \*L' '\*O (single quotes).
.LI "\*L-v \*Vfile_number\*O"
Produces an output line for each unpairable line in \*Vfile_number\*O
(where \*Vfile_number\*O is \*L1\*O or \*L2\*O), instead of the
default output.  If both \*L-v 1\*O and \*L-v 2\*O are specified,
produces output lines for all unpairable lines.
.LE
.\" .zZ "review, R1.1.2, XPG4"
.SH DESCRIPTION
.iX "join command"
.iX "joining" "lines of two files"
.iX "data fields" "joining"
.iX "database" "files" "joining"
.iX "files" "database"
.iX "files" "joining the lines of"
.iX "lines" "in a file" "joining"
.PP
The \*Vjoin field\*O is the field in the input files that \*Ljoin\*O
looks at to determine what will be included in the output.
One line appears in the output for each identical join
field appearing in both \*Vfile1\*O and \*Vfile2\*O.
The output line consists of the join field, the rest of the line from
\*Vfile1\*O, then the rest of the line from \*Vfile2\*O.
.PP
You can specify standard input in place of \*Vfile1\*O
or \*Vfile2\*O by substituting a \*L-\*O (dash) for the name.
.PP
Both input files must be sorted according to the collating sequence specified
by the \*LLC_COLLATE\*O environment variable, if set, for the fields
where they are to be joined (usually the first field in each line).
.PP
Fields are normally separated by a space, a tab character, or a
newline character.  In this case, \*Ljoin\*O treats consecutive
separators as one, and discards leading separators.
Use the \*L-t\*O flag to specify another field separator.
.SH EXAMPLES
.PP
Note that the vertical alignment shown in these examples may not be
consistent with your output.
.\" .zA "review, R1.1.2, XPG4"
.AL
.LI
To perform a simple join operation on two files, \*Lphonedir\*O and
\*Lnames\*O, whose first fields are the same, enter:
.iS
join  phonedir  names
\*O\c
.iE
.IP
If \*Lphonedir\*O contains the following telephone
directory:
.oS
Binst           555-6235
Dickerson       555-1842
Eisner          555-1234
Green           555-2240
Hrarii          555-0256
Janatha         555-7358
Lewis           555-3237
Takata          555-5341
Wozni           555-1234
\*O\c
.oE
.IP
and \*Lnames\*O is this listing of names and department
numbers:
.oS
Eisner          Dept. 389
Frost           Dept. 217
Green           Dept. 311
Takata          Dept. 454
Wozni           Dept. 520
\*O\c
.oE
.IP
then \*Ljoin phonedir names\*O displays:
.oS
Eisner          555-1234        Dept. 389
Green           555-2240        Dept. 311
Takata          555-5341        Dept. 454
Wozni           555-1234        Dept. 520
\*O\c
.oE
.IP
Each line consists of the join field (the last name), followed by
the rest of the line found in \*Lphonedir\*O and the rest of the
line in \*Lnames\*O.
.LI
To display unmatched lines as well as matched lines, enter:
.iS
join  -a 2  phonedir  names
\*O\c
.iE
.IP
If \*Lphonedir\*O contains:
.oS
Binst           555-6235
Dickerson       555-1842
Eisner          555-1234
Green           555-2240
Hrarii          555-0256
Janatha         555-7358
Lewis           555-3237
Takata          555-5341
Wozni           555-1234
\*O\c
.oE
.IP
and \*Lnames\*O contains:
.oS
Eisner          Dept. 389
Frost           Dept. 217
Green           Dept. 311
Takata          Dept. 454
Wozni           Dept. 520
\*O\c
.oE
.IP
then \*Ljoin -a 2
phonedir names\*O displays:
.oS
Eisner          555-1234        Dept. 389
Frost                           Dept. 217
Green           555-2240        Dept. 311
Takata          555-5341        Dept. 454
Wozni           555-1234        Dept. 520
\*O\c
.oE
.IP
This performs the same join operation as in the first example, and also
lists the lines of \*Lnames\*O that
have no match in \*Lphonedir\*O.
It includes \*LFrost\*O's name and department number in the listing,
although there is no entry for \*LFrost\*O in \*Lphonedir\*O.
.LI
To display selected fields, enter:
.iS
join  -o 2.3,2.1,1.2 phonedir names
\*O\c
.iE
.IP
This displays the following fields:
.IP
Field 3 of \*Lnames\*O (Department Number)
.IP
Field 1 of \*Lnames\*O (Last Name)
.IP
Field 2 of \*Lphonedir\*O (Telephone Number)
.IP
If \*Lphonedir\*O contains:
.oS
Binst           555-6235
Dickerson       555-1842
Eisner          555-1234
Green           555-2240
Hrarii          555-0256
Janatha         555-7358
Lewis           555-3237
Takata          555-5341
Wozni           555-1234
\*O\c
.oE
.IP
and \*Lnames\*O contains:
.oS
Eisner          Dept. 389
Frost           Dept. 217
Green           Dept. 311
Takata          Dept. 454
Wozni           Dept. 520
\*O\c
.oE
.IP
then \*Ljoin -o 2\&.3,2\&.1,1\&.2 phonedir names\*O displays:
.oS
389     Eisner  555-1234
311     Green   555-2240
454     Takata  555-5341
520     Wozni   555-1234
\*O\c
.oE
.LI
To perform the join operation on a field other than the first, enter:
.iS
sort -b +1 -2 phonedir | join -1 2 - numbers
\*O\c
.iE
.IP
This combines the lines in \*Lphonedir\*O and \*Lnames\*O,
comparing the second field of \*Lphonedir\*O
to the first field of \*Lnumbers\*O.
.IP
First, this sorts \*Lphonedir\*O by the second field because
both files must be sorted by their join fields.
The output of \*Lsort\*O is then piped to \*Ljoin\*O.
The \*L-\*O (dash) by itself causes the \*Ljoin\*O
command to use this output as its first file.
\*L-1 2\*O defines the second field of the
sorted \*Lphonedir\*O as the join field.
This is compared to the first field of \*Lnumbers\*O because its
join field is not specified with a \*L-2\*O flag.
.IP
If \*Lphonedir\*O contains:
.oS
Binst           555-6235
Dickerson       555-1842
Eisner          555-1234
Green           555-2240
Hrarii          555-0256
Janatha         555-7358
Lewis           555-3237
Takata          555-5341
Wozni           555-1234
\*O\c
.oE
.IP
and \*Lnumbers\*O contains:
.oS
555-0256
555-1234
555-5555
555-7358
\*O\c
.oE
.IP
then \*Lsort \&.\&.\&. | join \&.\&.\&.\*O displays:
.oS
555-0256        Hrarii
555-1234        Eisner
555-1234        Wozni
555-7358        Janatha
\*O\c
.oE
.IP
Each number in \*Lnumbers\*O is listed with the name listed in \*Lphonedir\*O
for that number.  Note that \*Ljoin\*O lists all the matches
for a given field.  In this case, \*Ljoin\*O lists both \*LEisner\*O and
\*LWozni\*O as having the telephone number \*L555-1234\*O.
The number \*L555-5555\*O is not listed because it does not appear
in \*Lphonedir\*O.
.LE
.\" .zZ "review, R1.1.2, XPG4"
.SH RELATED INFORMATION
.PP
Commands:  \*Lawk\*O(1), \*Lcmp\*O(1), \*Lcomm\*O(1), \*Lcut\*O(1),
\*Ldiff\*O(1), \*Lgrep\*O(1)/\*Legrep\*O(1)/\*Lfgrep\*O(1), \*Lpaste\*O(1),
\*Lsdiff\*O(1), \*Lsed\*O(1), \*Lsort\*O(1), \*Luniq\*O(1).
.EQ
delim off
.EN
