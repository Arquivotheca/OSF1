.\" This manpage source uses rsml coding. 
.so /usr/share/lib/tmac/sml
.so /usr/share/lib/tmac/rsml
.\"
.\"
.\" *********************************************************************
.\" *                                                                   *
.\" *      Copyright (c) Digital Equipment Corporation, 1991, 1994      *
.\" *                                                                   *
.\" *                       All Rights Reserved.                        *
.\" *                                                                   *
.\" *********************************************************************
.\"
.\" HISTORY
.\"
.\" @(#)$RCSfile: getgrent.3,v $ $Revision: 3.3.5.5 $ (DEC) $Date: 1994/01/13 20:26:14 $
.\"
.\" (c) Copyright 1991, OPEN SOFTWARE FOUNDATION, INC.
.\" ALL RIGHTS RESERVED
.\" 
.\" Begin Digital-specific information
.\" (c) Copyright 1990, 1991, 1992, 1993 OPEN SOFTWARE FOUNDATION, INC. 
.\" ALL RIGHTS RESERVED 
.\" OSF/1 1.2
.\"
.TH getgrent 3
.SH NAME
.PP
\*Lgetgrent\*O, \*Lgetgrent_r\*O, \*Lgetgrgid\*O, \*Lgetgrgid_r\*O, \*Lgetgrnam\*O, \*Lgetgrnam_r\*O, \*Lsetgrent\*O, \*Lsetgrent_r\*O, \*Lendgrent\*O, \*Lendgrent_r\*O, \*Lfgetgrent\*O, \*Lfgetgrent_r\*O \- Access group information in the user database
.SH LIBRARY
.PP
\*OStandard C Library (\*Llibc.a)
.SH SYNOPSIS
.PP
.sS
\*L#include <grp.h>
.PP
\*Lstruct group *getgrent(void);
.PP
\*Lint getgrent_r(
.nL
	\*Lstruct group *\*Vresult\*L,\*L
.nL
	\*Lchar *\*Vbuffer\*L,
.nL
	\*Lint \*Vlen\*L,
.nL
	\*LFILE **\*Vgr_fp\*L)\*L;
.PP
\*Lstruct group *getgrgid(
.nL
	\*Lgid_t \*Vgid\|\*L);
.PP
\*Lint getgrgid_r(
.nL
	\*Lgid_t \*Vgid\*L,
.nL
	\*Lstruct group *\*Vresult\|\*L,
.nL
	\*Lchar *\*Vbuffer\|\*L,
.nL
	\*Lint \*Vlen\*L\|);
.PP
\*Lstruct group *getgrnam(
.nL
	\*Lconst char *\*Vname\*L);\*L
.PP
\*Lint getgrnam_r\|(\*O
.nL
	\*Lconst char *\*Vname\*L,\*L
.nL
	\*Lstruct group *\*Vresult\*L,\*L
.nL
	\*Lchar *\*Vbuffer\*L,\*L
.nL
	\*Lint \*Vlen\*L);\*L
.PP
\*Lint setgrent(void);
.PP
\*Lint setgrent_r(
.nL
	FILE **\*Vgr_fp\*L);\*O
.PP
\*Lvoid endgrent(void);\*L
.PP
\*Lvoid endgrent_r(
.nL
	FILE **\*Vgr_fp\*L\|);\*O
.PP
\*Lstruct group *fgetgrent(
.nL
	FILE *\*Vf\*L\|);
.PP
\*Lint fgetgrent_r(
.nL
	FILE *\*Vf\*L,
.nL
	struct group *\*Vresult\*L,
.nL
	char *\*Vbuffer\*L,
.nL
	int \*Vlen\*L);\*O
.sE
.SH PARAMETERS
.PP
.VL
.LI "\*Vname"
\*OSpecifies the name of the group for which the group file entry is
to be retrieved.
.LI "\*Vgid"
\*OSpecifies the group ID of the group for which the
group file entry is to be retrieved.
.LI "\*Vresult"
\*OPoints to the retrieved group file entry.
.LI "\*Vbuffer\*O"
Specifies the working buffer that is able to hold the longest group entry in
the database
(\*L/etc/group\*O).
.LI "\*Vlen"
\*OSpecifies the length of
\*Vbuffer\*O.
This length should be sufficient
for \*Vbuf\*O to hold the longest \*L/etc/group\*O line.
.LI "\*Vgr_fp\*O"
Specifies a file that contains the next group structure (initialized
by the user).
.LI "\*Vf\*O"
Specifies a file that contains the next group structure (initialized
by the user).  This file should have the same format as \*L/etc/group\*O.
.\" Added information from John Williams.
The minimum buffer size is 1024 bytes as defined for SIABUFSIZ
in \*L/usr/include/sia.h\*O.
.\" End Digital-specific information
.LI "\*Vlen"
\*OSpecifies the length of
\*Vbuffer\*O.
.\" Begin Digital-specific information
.\" Added information from John Williams.
The minimum buffer size is 1024 bytes as defined for SIABUFSIZ
in \*L/usr/include/sia.h\*O.
.\" End Digital-specific information
.LE
.SH DESCRIPTION
.PP
.iX "getgrent function"
.iX "getgrent_r function"
.iX "getgrgid function"
.iX "getgrgid_r function"
.iX "getgrnam function"
.iX "getgrnam_r function"
.iX "setgrent function"
.iX "setgrent_r function"
.iX "endgrent function"
.iX "endgrent_r function"
.iX "fgetgrent function"
.iX "fgetgrent_r function"
.iX "database" "user"
.iX "user database" "accessing basic group information"
.iX "group information" "accessing in user database"
.iX " function"
The
\*Lgetgrent(\|)\*O,
\*Lgetgrgid(\|)\*O,
\*Lgetgrnam(\|)\*O,
\*Lsetgrent(\|)\*O,
\*Lendgrent(\|)\*O,
and \*Lfgetgrent(\|)\*O
functions may be used to access the basic group attributes.
.PP
The \*Lsetgrent(\|)\*O function opens the user database (if not
already open) and rewinds to the first group entry
in the database.
.PP
The \*Lgetgrent(\|)\*O, \*Lgetgrnam(\|)\*O, and \*Lgetgrgid(\|)\*O
functions return information about the requested group.
The \*Lgetgrent(\|)\*O function returns the next group in the
sequential search.
The \*Lgetgrnam(\|)\*O function
returns the first group in the database with the
\*Lgr_name\*O
field that matches the \*Vname\*O
parameter.
The \*Lgetgrgid(\|)\*O
function returns the first group in the
database with a
\*Lgr_gid\*O
field that matches the \*Vgid\*O parameter.
The \*Lendgrent(\|)\*O
function closes the user database.
.PP
The \*Lgroup\*O structure, which is returned by the
\*Lgetgrent(\|)\*O,
\*Lgetgrnam(\|)\*O,
and
\*Lgetgrgid(\|)\*O,
functions, is defined in the \*Lgrp.h\*O
header file, and contains the following members:
.VL 1i
.LI "\*Lgr_name"
\*OThe name of the group.
.LI "\*Lgr_passwd"
\*OThe password of the group.  (Note that this
field is not used by the system, so its value is meaningless.)
.LI "\*Lgr_gid"
\*OThe ID of the group.
.LI "\*Lgr_mem"
\*OThe members of the group.
.LE
.PP
The \*Lfgetgrent(\|)\*O function gets a group file entry from
the file specified by the \*Vf\*O parameter, rather than assuming that
it comes from the \*L/etc/group\*O file.
.wH returns a pointer to the next group
.wH structure in the file specified by the \*Vf\*O parameter.
This file must have the format of the \*L/etc/group\*O file.
.PP
The
\*Lgetgrgid_r(\|)\*O,
\*Lgetgrnam_r(\|)\*O,
\*Lgetgrent_r(\|)\*O,
\*Lsetgrent_r(\|)\*O, \*Lfgetgrent_r(\|)\*O, and \*Lendgrent_r(\|)\*O
functions are the reentrant versions of
\*Lgetgrgid(\|)\*O,
\*Lgetgrnam(\|)\*O,
\*Lgetgrent(\|)\*O, \*Lsetgrent(\|)\*O, \*Lfgetgrent(\|)\*O, and
\*Lendgrent(\|)\*O respectively.
The \*Lgetgrent_r(\|)\*O, \*Lsetgrent_r(\|)\*O,
\*Lfgetgrent_r(\|)\*O, and
\*Lendgrent_r(\|)\*O functions use the \*Vf\*O and \*Vgr_fp\*O
parameters to keep track
of the calls to the \*Lgetgrent_r(\|)\*O function, so that subsequent calls
will return subsequent entries from the \*L/etc/group\*O file.
Upon successful completion for the
\*Lgetgrgid_r(\|)\*O,
\*Lgetgrnam_r(\|)\*O, \*Lfgetgrent_r(\|)\*O, and
\*Lgetgrent_r(\|)\*O functions,
the result is stored in
the buffer pointed to by the
\*Vresult\*O
parameter, with references to the working \*Vbuffer\*O.
.SH NOTES
.PP
\*OThe data that is returned by the \*Lgetgrent(\|)\*O,
\*Lgetgrnam(\|)\*O, \*Lfgetgrent(\|)\*O, and \*Lgetgrgid(\|)\*O functions is stored
in a static area and will be overwritten on subsequent calls to these
routines.  If it is to be saved, it should be copied.
.PP
Note that the caller is expected to initialize \*V*gr_fp\*O to NULL
before using it for the first time.
.PP
Note also that entries which are excessively long will be ignored by both the
reentrant and non-reentrant functions.
.PP
If the system is configured to access the basic group attributes
database through NIS, the \*Lgetgrent_r(\|)\*O function may not
produce correct results if called from multiple threads.
.VL 1.5i
.LI "\*LAES Support Level:\*O"
Full use (\*Lgetgrgid(\|)\*O, \*Lgetgrnam(\|)\*O).
.LE
.SH RETURN VALUES
.PP
Upon successful completion,
the \*Lgetgrent(\|)\*O, \*Lgetgrnam(\|)\*O, \*Lgetgrgid(\|)\*O, and
\*Lfgetgrent(\|)\*O
functions return a pointer to a valid
\*Lgroup\*O
structure containing a matching entry.
Upon failure, these functions return NULL.
.PP
The \*Lgetgrent_r(\|)\*O, \*Lgetgrnam_r(\|)\*O, \*Lgetgrgid_r(\|)\*O, and
\*Lfgetgrent_r(\|)\*O functions return a value of 0 (zero) for success
and a value of -1 for failure.
.PP
The \*Lsetgrent(\|)\*O function returns a a value of 1 for success and
a value of 0 (zero) for
failure.
.PP
The \*Lsetgrent_r(\|)\*O function returns a value of 0 (zero) for
success and a value of -1 for
failure.
.SH ERRORS
.PP
If any of the following conditions occurs, the
\*Lgetgrent_r(\|)\*O, \*Lgetgrnam_r(\|)\*O, \*Lgetgrgid_r(\|)\*O,
\*Lfgetgrent_r(\|)\*O, and \*Lsetgrent_r(\|)\*O functions
set \*Lerrno\*O to the corresponding value:
.VL
.LI "[EINVAL]"
The \*Vresult\*O, \*Vgr_fp\*O, or \*Vbuffer\*O parameter is invalid, or
\*Vlen\*O is too small.
.LE
.PP
If any of the following additional conditions occurs, the
\*Lgetgrent_r(\|)\*O, \*Lgetgrnam_r(\|)\*O, \*Lgetgrgid_r(\|)\*O, and
\*Lfgetgrent_r(\|)\*O functions
set \*Lerrno\*O to the corresponding value:
.VL
.LI "[ESRCH]"
The search failed.
.LE
.ig ++
.PP
If \*Lgetgrent_r(\|)\*O or \*Lfgetgrent_r(\|)\*O fail,
\*Lerrno\*O may be set to one of the
following values:
.VL 1i
.LI "[EINVAL]"
The \*Vresult\*O, \*Vbuffer\*O, or \*Vlen\*O is invalid.
.LI "[EIO]"
There was a failure accessing the database.
.LI "[ENOENT]"
There was no \*L/etc/group\*O database found.
.LE
.PP
If \*Lgetgrgid_r(\|)\*O fails, \*Lerrno\*O may
be set to one of the
following values:
.VL 1i
.LI "[EINVAL]"
The \*Vresult\*O, \*Vbuffer\*O, or \*Vlen\*O is invalid.
.LI "[EIO]"
There was a failure accessing the database.
.LI "[ENOENT]"
There was no \*L/etc/group\*O database found or there was no entry for
the specified group ID,
\*Vgid\*O.
.LE
.PP
If \*Lgetgrnam_r(\|)\*O fails, \*Lerrno\*O may
be set to one of the
following values:
.VL 1i
.LI "[EINVAL]"
The \*Vresult\*O, \*Vbuffer\*O, or \*Vlen\*O is invalid.
.LI "[EIO]"
There was a failure accessing the database.
.LI "[ENOENT]"
There was no \*L/etc/group\*O database found or there was no entry for
the specified \*Vname\*O.
.LE
.++
.SH RELATED INFORMATION
.PP
Functions:
\*Lgetpwent\*O(3).
.iX "getgrent function"
.iX "getgrent_r function"
.iX "getgrgid function"
.iX "getgrgid_r function"
.iX "getgrnam function"
.iX "getgrnam_r function"
.iX "setgrent function"
.iX "setgrent_r function"
.iX "endgrent function"
.iX "endgrent_r function"
.iX "fgetgrent function"
.iX "fgetgrent_r function"
.EQ
delim off
.EN
