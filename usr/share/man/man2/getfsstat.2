.\" This manpage source uses rsml coding. 
.so /usr/share/lib/tmac/sml
.so /usr/share/lib/tmac/rsml
.\"
.\"
.\" *********************************************************************
.\" *                                                                   *
.\" *      Copyright (c) Digital Equipment Corporation, 1991, 1994      *
.\" *                                                                   *
.\" *                       All Rights Reserved.                        *
.\" *                                                                   *
.\" *********************************************************************
.\"
.\"
.\" HISTORY
.\"
.\" @(#)$RCSfile: getfsstat.2,v $ $Revision: 3.2.2.2 $ (DEC) $Date: 1992/05/15 09:00:01 $
.\"
.\" 
.\" (c) Copyright 1991, OPEN SOFTWARE FOUNDATION, INC.
.\" ALL RIGHTS RESERVED
.\" 
.\"
.\"
.\" Copyright (c) 1989 The Regents of the University of California.
.\" All rights reserved.
.\" 
.\" Redistribution and use in source and binary forms are permitted provided
.\" that: (1) source distributions retain this entire copyright notice and
.\" comment, and (2) distributions including binaries display the following
.\" acknowledgement:  ``This product includes software developed by the
.\" University of California, Berkeley and its contributors'' in the
.\" documentation or other materials provided with the distribution and in
.\" all advertising materials mentioning features or use of this software.
.\" Neither the name of the University nor the names of its contributors may
.\" be used to endorse or promote products derived from this software without
.\" specific prior written permission.
.\" THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR IMPLIED
.\" WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
.\" 
.\" @(#)getfsstat.2	6.4 (Berkeley) 6/23/90
.\" 
.TH getfsstat 2
.SH NAME
\*Lgetfsstat\*O \- Gets list of all mounted file systems
.SH SYNOPSIS 
.sS
\*L#include <sys/types.h>
.nL
#include <sys/mount.h>
.sp .4v
\*Lgetfsstat(
.nL
	struct statfs *\*Vbuf\*L\|[\|]\|,
.nL
	long \*Vbufsize\*L,
.nL
	int \*Vflags\*L );\*O
.sE 
.SH PARAMETERS
.\" from TP  
.VL 
.LI "\*Vbuf\*O"
Points to an array of
\*Lstatfs\*O
structures.
.\" from TP  
.LI "\*Vbufsize\*O" 
Specifies the size in bytes of the
\*Vbuf\*O
parameter.
.\" from TP  
.LI "\*Vflags\*O" 
Specifies one of the following flags:
.wH .RS  Can not be used in nested lists
.\" from TP .5i  
.VL
.LI "MNT_WAIT" 
Wait for an update from each file system before returning information.
.\" from TP  
.LI "MNT_NOWAIT" 
Information is returned without requesting
an update from each file system.
Thus, some of the information will be out of date, but the
\*Lgetfsstat(\|)\*O
function
will not block waiting for information from a file system that is
unable to respond.
.wH .RE
.LE
.LE 
.SH DESCRIPTION
.iX "getfsstat function"
.iX "filesystem" "returning list of all mounted"
.iX "filesystem" "mounted"
The
\*Lgetfsstat(\|)\*O
function
returns information about all mounted file systems.
Upon successful completion,
the buffer pointed to by the
\*Vbuf\*O
parameter
is filled with an array of
\*Lstatfs\*O
structures, one for each mounted file system
up to the size specified by the
\*Vbufsize\*O
parameter.
.PP 
If the
\*Vbuf\*O
parameter
is given as 0 (zero), the
\*Lgetfsstat(\|)\*O
function
returns just the number of mounted file systems.
.SH RETURN VALUE
Upon successful completion, the number of
\*Lstatfs\*O
structures is returned.
Otherwise, \-1 is returned and
\*Lerrno\*O
is set to indicate the error.
.SH ERRORS
If the
\*Lgetfsstat(\|)\*O
function
fails,
\*Lerrno\*O
may be set to one of the following values:
.\" from TP 1i  
.VL 1i
.LI "[EFAULT]"
The
\*Vbuf\*O
parameter
points to an invalid address.
.\" from TP  
.LI "[EIO]" 
An I/O error occurred while reading from or writing to the file system.
.LE 
.SH "RELATED INFORMATION"
Functions:
\*Lstatfs\*O(2)
.PP 
Commands:
\*Lmount\*O(8)
.iX "getfsstat function"
.EQ
delim off
.EN
