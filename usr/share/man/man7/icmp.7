.\" This manpage source uses rsml coding. 
.so /usr/share/lib/tmac/sml
.so /usr/share/lib/tmac/rsml
.\"
.\"
.\" *********************************************************************
.\" *                                                                   *
.\" *      Copyright (c) Digital Equipment Corporation, 1991, 1994      *
.\" *                                                                   *
.\" *                       All Rights Reserved.                        *
.\" *                                                                   *
.\" *********************************************************************
.\"
.\"
.\" HISTORY
.\"
.\" @(#)$RCSfile: icmp.7,v $ $Revision: 3.2.2.2 $ (DEC) $Date: 1992/05/21 11:21:29 $
.\"
.\" 
.\" (c) Copyright 1991, OPEN SOFTWARE FOUNDATION, INC.
.\" ALL RIGHTS RESERVED
.\" 
.\"
.\"
.\" Copyright (c) 1986 Regents of the University of California.
.\" All rights reserved.
.\" 
.\" Redistribution and use in source and binary forms are permitted provided
.\" that: (1) source distributions retain this entire copyright notice and
.\" comment, and (2) distributions including binaries display the following
.\" acknowledgement:  ``This product includes software developed by the
.\" University of California, Berkeley and its contributors'' in the
.\" documentation or other materials provided with the distribution and in
.\" all advertising materials mentioning features or use of this software.
.\" Neither the name of the University nor the names of its contributors may
.\" be used to endorse or promote products derived from this software without
.\" specific prior written permission.
.\" THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR IMPLIED
.\" WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
.\" 
.\" @(#)icmp.4	6.5 (Berkeley) 6/23/90
.\" 
.TH icmp 7
.SH NAME
\*Licmp\*O \- Internet Control Message Protocol
.SH SYNOPSIS 
.sS
\*L#include <sys/socket.h>\*O
.nL
\*L#include <netinet/in.h>\*O
.PP 
\*Ls = socket(AF_INET, SOCK_RAW, \f2proto\f1);\*O
.sE 
.SH DESCRIPTION
.iX "icmp" "Internet Control Message Protocol"
.iX "Internet Control Message Protocol"
.iX "sockets"
.iX "protocols" "ICMP"
The Internet Control Message Protocol
(ICMP) is the error and control message protocol used
by the Internet Protocol (IP) and the Internet Protocol family.  It
may be accessed
through a raw socket for network monitoring
and diagnostic functions.
The
\*Vproto\*O
parameter to the socket call to create an ICMP socket
is obtained from the
\*Lgetprotobyname(\|)\*O
function.
ICMP sockets are connectionless,
and are normally used with the
\*Lsendto(\|)\*O
and
\*Lrecvfrom(\|)\*O
functions.  The
\*Lconnect(\|)\*O
function may also be used to fix the destination for future
packets, in which case the
\*Lread(\|)\*O
or
\*Lrecv(\|)\*O
and
\*Lwrite(\|)\*O
or
\*Lsend(\|)\*O
functions may be used.
.PP 
Outgoing packets automatically have an IP header prepended to
them (based on the destination address).
Incoming packets are received with the IP header and options intact.
.SH ERRORS
If a socket operation fails,
\*Lerrno\*O
may be set to one of the following values:
.\"from TP 1i"  
.VL 1i
.LI "[EISCONN]"
The socket is already connected.  This error occurs
when trying to establish connection on a socket
or when trying to send a datagram with the destination
address specified.
.\"from TP 1i"  
.LI "[ENOTCONN]" 
The
destination address of a datagram was not
specified, and the socket has not been
connected.
.\"from TP 1i"  
.LI "[ENOBUFS]" 
The system ran out of memory for
an internal data structure.
.\"from TP 1i"  
.LI "[EADDRNOTAVAIL]" 
An attempt was made to create a
socket with a network address for which no network interface
exists.
.LE 
.SH RELATED INFORMATION
.PP 
Functions:
\*Lsend\*O(2),
\*Lrecv\*O(2)
.PP 
Files:
\*Lnetintro\*O(7),
\*Linet\*O(7),
\*Lip\*O(7)
.iX "icmp" "Internet Control Message Protocol"
.EQ
delim off
.EN
