/*
 * *****************************************************************
 * *                                                               *
 * *    Copyright (c) Digital Equipment Corporation, 1991, 1994    *
 * *                                                               *
 * *   All Rights Reserved.  Unpublished rights  reserved  under   *
 * *   the copyright laws of the United States.                    *
 * *                                                               *
 * *   The software contained on this media  is  proprietary  to   *
 * *   and  embodies  the  confidential  technology  of  Digital   *
 * *   Equipment Corporation.  Possession, use,  duplication  or   *
 * *   dissemination of the software and media is authorized only  *
 * *   pursuant to a valid written license from Digital Equipment  *
 * *   Corporation.                                                *
 * *                                                               *
 * *   RESTRICTED RIGHTS LEGEND   Use, duplication, or disclosure  *
 * *   by the U.S. Government is subject to restrictions  as  set  *
 * *   forth in Subparagraph (c)(1)(ii)  of  DFARS  252.227-7013,  *
 * *   or  in  FAR 52.227-19, as applicable.                       *
 * *                                                               *
 * *****************************************************************
 */
/*
 * HISTORY
 */

DEFINES = MotifLibsDefines
INCLUDES = -I. -I../../lib  -I$(MTOOLKITSRC) -I$(TOP) -I$(LIBSRC) -I$(MWIDGETSRC) -I$(INCLUDESRC) MotifSpecialIncludes
LOCAL_LIBRARIES = MrmClientLibs
LINTLIBS = $(LINTMRESOURCE) $(LINTXMLIB) $(LINTXMTOOL) $(LINTXLIB)
INSTALLFLAGS = $(INSTINCFLAGS)
WMLSRC = ../../tools/wml
#define PassCDebugFlags 'CDEBUGFLAGS=$(CDEBUGFLAGS)'

SRCS1 =	UilCmd.c 	UilDiags.c	UilKeyTab.c	UilLexAna.c  \
	UilLexPars.c	UilLstLst.c	UilP2Out.c	UilP2Reslv.c \
	UilSarComp.c	UilSarExp.c	UilSarInc.c	UilSarMod.c \
	UilSarObj.c	UilSarProc.c	UilSarVal.c	UilSrcSrc.c  \
	UilSymNam.c	UilSymStor.c	UilData.c	UilMain.c \
	UilLstMac.c	UilSemVal.c	UilSemCSet.c	UilDB.c

OBJS1 =	UilCmd.o	UilDiags.o	UilKeyTab.o	UilLexAna.o  \
	UilLexPars.o	UilLstLst.o	UilP2Out.o	UilP2Reslv.o \
	UilSarComp.o	UilSarExp.o	UilSarInc.o	UilSarMod.o \
	UilSarObj.o	UilSarProc.o	UilSarVal.o	UilSrcSrc.o  \
	UilSymNam.o	UilSymStor.o	UilData.o	UilMain.o \
	UilLstMac.o	UilSemVal.o	UilSemCSet.o	UilDB.o

SRCS2 = UilCmd.c	UilDiags.c	UilKeyTab.c	UilLexAna.c  \
	UilLexPars.c	UilLstLst.c	UilP2Out.c	UilP2Reslv.c \
	UilSarComp.c	UilSarExp.c	UilSarInc.c	UilSarMod.c \
	UilSarObj.c	UilSarProc.c	UilSarVal.c	UilSrcSrc.c  \
	UilSymNam.c	UilSymStor.c	UilData.c \
	UilLstMac.c	UilSemVal.c	UilSemCSet.c	UilDB.c

OBJS2 =	UilCmd.o	UilDiags.o	UilKeyTab.o	UilLexAna.o  \
	UilLexPars.o	UilLstLst.o	UilP2Out.o	UilP2Reslv.o \
	UilSarComp.o	UilSarExp.o	UilSarInc.o	UilSarMod.o \
	UilSarObj.o	UilSarProc.o	UilSarVal.o	UilSrcSrc.o  \
	UilSymNam.o	UilSymStor.o	UilData.o	UilParser.o \
	UilLstMac.o	UilSemVal.o	UilSemCSet.o	UilDB.o

HEADERS = 	Uil.h	UilSymGl.h	UilDBDef.h	UilSymDef.h \
	UilDef.h	XmAppl.uil

PROGRAMS = uil

ForceSubdirs($(WMLSRC))

NormalLibraryObjectRule()
ComplexProgramTarget_1(uil, $(LOCAL_LIBRARIES),$(SYSLIBS))

NormalLintTarget($(SRC1))
NormalLibraryTarget(Uil,$(OBJS2))
LintLibraryTarget(Uil,$(SRCS2))

InstallLibrary(Uil,$(USRLIBDIR))
InstallMultiple($(HEADERS),$(INCROOT)/uil)

BuildIncludes($(HEADERS) XmAppl.uil,uil,..)

install::
	$(LN) ../uil $(DESTDIR)/$(INCDIR)/uil 

#ifndef AlphaOSFCrossEnvironment
#ifdef HasSharedLibraries
/*
 * this is needed for shared builds so that uil uses current libs and not
 * a shared lib that is installed. This program will not be installed.
 */

all:: uil.static

STATIC_LOCAL_LIBS = \
	../../lib/Mrm/libMrm.a \
	../../lib/Xm/libXm.a \
	../../../lib/Xt/libXt.a \
	../../../lib/Xmu/libXmu.a \
	../../../lib/Xt/libXt.a \
	../../../extensions/lib/libXext.a \
	../../../lib/X/libX11.a

uil.static: $(WMLSRC) $(OBJS1) $(STATIC_LOCAL_LIBS)
	$(RM) $@
	$(CC) -non_shared -O -o $@ $(LDOPTIONS) $(OBJS1) $(STATIC_LOCAL_LIBS) \
		$(LDLIBS) $(SYSLIBS) $(EXTRA_LOAD_FLAGS) $(DNETLIB)

#endif
#endif

/*
 * files generated by wml
*/
clean::
	rm -f UilConst.h UilKeyTab.h UilLexPars.c UilLexPars.h UilSymArTa.h \
	UilSymArTy.h UilSymCSet.h UilSymCtl.h UilSymEnum.h UilSymGen.h \
	UilSymNam.h UilSymRArg.h UilSymReas.h UilTokName.h UilUrmClas.h 
